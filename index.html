
<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ø´ØªÙ‡ â€” v3.2 (Swapped + Filters)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
<style>

/* ğŸ›  Resizable columns + wrap text */
th, td {
  white-space: normal !important;
  word-wrap: break-word !important;
  overflow: hidden;
}

th.resizable {
  position: relative;
}

th.resizable .resizer {
  position: absolute;
  right: 0;
  top: 0;
  width: 5px;
  cursor: col-resize;
  user-select: none;
  height: 100%;
}
</style>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0f71b8">
</head>
<body>
  <div class="app">
    <div class="toolbar">
      <button id="btnLoad">Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ (CSV/Excel)</button>
      <button id="btnFilters">ÙÛŒÙ„ØªØ±Ù‡Ø§</button>
      <button id="btnDeleteAllRows" class="danger">Ø­Ø°Ù Ù‡Ù…Ù‡</button>
      <button id="btnExportAllCSV">CSV Ù†ØªØ§ÛŒØ¬</button>
      <button id="btnExportAllXLSX">Excel Ù†ØªØ§ÛŒØ¬</button>
      <button id="btnColumns">Ø³ØªÙˆÙ†â€ŒÙ‡Ø§</button>
      <input id="search" type="text" placeholder="Ø¬Ø³ØªØ¬Ùˆ..." />
    </div>

    <div class="content">
      <!-- LEFT: Table -->
      <div class="panel">
        <h3>Ø¬Ø¯ÙˆÙ„ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§<span id="totalCount" class="count-badge"></span><span id="filteredCount" class="count-badge muted"></span><div id="colSizer" class="col-sizer" title="ØªÙ†Ø¸ÛŒÙ… ÛŒÚ©Ø¬Ø§ÛŒ Ø¹Ø±Ø¶ Ø³ØªÙˆÙ†â€ŒÙ‡Ø§"><input type="range" id="colRange" min="50" max="100" step="1" value="50"><span id="colRangeVal">Û±Û°Û°px</span></div></h3>
        <div class="tablewrap">
          <table id="grid">
            <thead><tr id="headrow"></tr></thead>
            <tbody id="bodyrows"></tbody>
          </table>
        </div>
      </div>

      <div id="splitter" aria-label="divider" title="Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø¨Ú©Ø´ÛŒØ¯"></div>

      <!-- RIGHT: Cards + its buttons -->
      <div class="panel">
        <h3>Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡â€ŒÙ‡Ø§ (ÙÙ„Ø´â€ŒÚ©Ø§Ø±Øª)</h3>
        <div id="cards" class="rightcards"></div>
        <div class="right-actions">
          <button id="btnAdd">Ø§ÙØ²ÙˆØ¯Ù† âœ</button>
          <button id="btnRemove">Ø­Ø°Ù</button>
          <button id="btnMoveUp">Ø¨Ø§Ù„Ø§</button>
          <button id="btnMoveDown">Ù¾Ø§ÛŒÛŒÙ†</button>
          <button id="btnClearCards" class="danger">Ø­Ø°Ù Ù‡Ù…Ù‡</button>
          <button id="btnExportSelCSV">CSV Ø§Ù†ØªØ®Ø§Ø¨ÛŒ</button>
          <button id="btnExportSelXLSX">Excel Ø§Ù†ØªØ®Ø§Ø¨ÛŒ</button>
          <button id="btnExportSelPDF">PDF Ø§Ù†ØªØ®Ø§Ø¨ÛŒ</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Filter Modal -->
  <div id="filterModal" class="modal-backdrop">
    <div class="modal">
      <h4>ÙÛŒÙ„ØªØ±Ù‡Ø§</h4>
      <div id="chips" class="filters-header"></div>
      <div class="filter-top">
        <button id="btnClearThis" class="danger">Ù¾Ø§Ú© Ø§ÛŒÙ† Ø³ØªÙˆÙ†</button>
        <button id="btnSelectAll">Ø§Ù†ØªØ®Ø§Ø¨ Ù‡Ù…Ù‡</button>
        <button id="btnSelectNone">Ù‡ÛŒÚ†</button>
        <input id="filterSearch" type="text" placeholder="â€¦Ø¬Ø³ØªØ¬Ùˆ">
      </div>
      <div id="filterBody" class="filter-body"></div>
      <div class="filter-footer">
        <div class="left">
          <button id="btnClearAll">Ø­Ø°Ù Ù‡Ù…Ù‡ ÙÛŒÙ„ØªØ±Ù‡Ø§</button>
        </div>
        <div class="right">
          <button id="btnFilterCancel">Ø§Ù†ØµØ±Ø§Ù</button>
          <button id="btnFilterApply" class="apply">Ø§Ø¹Ù…Ø§Ù„</button>
        </div>
      </div>
    </div>
  </div>

  <input id="file" type="file" accept=".xlsx,.xls,.csv" hidden />
  <script src="columns_patch.js"></script>
<script src="selection_patch.js"></script>
<button id="btnExportPDF" title="Export PDF">PDF</button>

  <script src="web-shim.js"></script>
  <script src="libs/xlsx.full.min.js"></script>
  <script src="renderer-web.js"></script>


<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('./service-worker.js').catch(function(e){
        console.warn('SW registration failed', e);
      });
    });
  }
</script>

</body>
</html>
